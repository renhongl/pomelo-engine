{"version":3,"sources":["example/defaultLoading.js"],"names":["Loading","args","Object","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","container","totalLoading","currentLoading","disable","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","con","loading","text","document","createElement","loadingChild","setAttribute","appendChild","body","name","desc","config","resource","_this","resMapping","loaded","_loaded","index","style","width","clientWidth","count","completed","setTimeout","callback","_completed","removeChild","_getMsgContainer","innerText","error","_this2","_removeMsgCon"],"mappings":"4JAAaA,EAAb,WACE,SAAAA,EAAYC,GAAOC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,GACjBI,KAAKC,UAAY,KACjBD,KAAKE,aAAe,EACpBF,KAAKG,eAAiB,EACtBH,KAAKI,SAAU,EALnB,OAAAN,OAAAO,EAAA,EAAAP,CAAAF,EAAA,EAAAU,IAAA,mBAAAC,MAAA,WASI,OAAIP,KAAKI,QACA,KAELJ,KAAKQ,IACA,CACLA,IAAKR,KAAKQ,IACVC,QAAST,KAAKS,QACdC,KAAMV,KAAKU,OAGbV,KAAKQ,IAAMG,SAASC,cAAc,OAClCZ,KAAKS,QAAUE,SAASC,cAAc,OACtCZ,KAAKa,aAAeF,SAASC,cAAc,OAC3CZ,KAAKU,KAAOC,SAASC,cAAc,OACnCZ,KAAKS,QAAQK,aAAa,QAAS,2BACnCd,KAAKa,aAAaC,aAAa,QAAS,iCACxCd,KAAKU,KAAKI,aAAa,QAAS,gCAChCd,KAAKQ,IAAIO,YAAYf,KAAKS,SAC1BT,KAAKS,QAAQM,YAAYf,KAAKa,cAC9Bb,KAAKQ,IAAIO,YAAYf,KAAKU,MAC1BV,KAAKQ,IAAIM,aAAa,QAAS,+BAC/BH,SAASK,KAAKD,YAAYf,KAAKQ,KACxB,CACLA,IAAKR,KAAKQ,IACVC,QAAST,KAAKS,QACdC,KAAMV,KAAKU,SAlCnB,CAAAJ,IAAA,eAAAC,MAAA,SAuCeU,EAAMC,EAAMC,EAAQC,GAAU,IAAAC,EAAArB,KACzCA,KAAKsB,WAAWL,GAAQG,EACpBD,EAAOI,OACTJ,EAAOI,OAAOL,GAEdlB,KAAKwB,QAAQN,GAEflB,KAAKyB,QACDzB,KAAKQ,MACPR,KAAKa,aAAaa,MAAMC,MACrB3B,KAAKS,QAAQmB,YAAc5B,KAAKyB,MAASzB,KAAK6B,MAAQ,MAEvD7B,KAAKyB,QAAUzB,KAAK6B,QAClBV,EAAOW,WACTX,EAAOW,YACPC,WAAW,WACTZ,EAAOa,SAASX,EAAKC,aACpB,MAEHtB,KAAKiC,WAAWd,MA1DxB,CAAAb,IAAA,gBAAAC,MAAA,WAgEQP,KAAKQ,MACPG,SAASK,KAAKkB,YAAYlC,KAAKQ,KAC/BR,KAAKQ,IAAM,QAlEjB,CAAAF,IAAA,SAAAC,MAAA,WAuEmBP,KAAKmC,mBAAdzB,KACD0B,UAAY,+CAxErB,CAAA9B,IAAA,UAAAC,MAAA,SA2EUW,GACN,IACiBlB,KAAKmC,mBAAdzB,KACD0B,UAAYlB,EACjB,MAAOmB,OA/Eb,CAAA/B,IAAA,aAAAC,MAAA,SAkFaY,GAAQ,IAAAmB,EAAAtC,KACjB,IACiBA,KAAKmC,mBAAdzB,KACD0B,UAAY,uBACjB,MAAOC,IACLlB,EAAOa,UACTD,WAAW,WACTO,EAAKC,gBACLpB,EAAOa,SAASM,EAAKhB,aACpB,OA3FT,CAAAhB,IAAA,UAAAC,MAAA,WAgGIP,KAAKI,SAAU,EACfJ,KAAK6B,MAAQ,EACb7B,KAAKyB,MAAQ,EACbzB,KAAKsB,WAAa,GAClBtB,KAAKuC,oBApGT3C,EAAA","file":"static/js/10.72d73450.chunk.js","sourcesContent":["export class Loading {\r\n  constructor(args) {\r\n    this.container = null;\r\n    this.totalLoading = 0;\r\n    this.currentLoading = 0;\r\n    this.disable = false;\r\n  }\r\n\r\n  _getMsgContainer() {\r\n    if (this.disable) {\r\n      return null;\r\n    }\r\n    if (this.con) {\r\n      return {\r\n        con: this.con,\r\n        loading: this.loading,\r\n        text: this.text\r\n      };\r\n    } else {\r\n      this.con = document.createElement(\"div\");\r\n      this.loading = document.createElement(\"div\");\r\n      this.loadingChild = document.createElement(\"div\");\r\n      this.text = document.createElement(\"div\");\r\n      this.loading.setAttribute(\"class\", \"pomelo-resource-loading\");\r\n      this.loadingChild.setAttribute(\"class\", \"pomelo-resource-loading-child\");\r\n      this.text.setAttribute(\"class\", \"pomelo-resource-loading-text\");\r\n      this.con.appendChild(this.loading);\r\n      this.loading.appendChild(this.loadingChild);\r\n      this.con.appendChild(this.text);\r\n      this.con.setAttribute(\"class\", \"pomelo-resource-loading-con\");\r\n      document.body.appendChild(this.con);\r\n      return {\r\n        con: this.con,\r\n        loading: this.loading,\r\n        text: this.text\r\n      };\r\n    }\r\n  }\r\n\r\n  _checkLoaded(name, desc, config, resource) {\r\n    this.resMapping[name] = resource;\r\n    if (config.loaded) {\r\n      config.loaded(desc);\r\n    } else {\r\n      this._loaded(desc);\r\n    }\r\n    this.index++;\r\n    if (this.con) {\r\n      this.loadingChild.style.width =\r\n        (this.loading.clientWidth * this.index) / this.count + \"px\";\r\n    }\r\n    if (this.index === this.count) {\r\n      if (config.completed) {\r\n        config.completed();\r\n        setTimeout(() => {\r\n          config.callback(this.resMapping);\r\n        }, 500);\r\n      } else {\r\n        this._completed(config);\r\n      }\r\n    }\r\n  }\r\n\r\n  _removeMsgCon() {\r\n    if (this.con) {\r\n      document.body.removeChild(this.con);\r\n      this.con = null;\r\n    }\r\n  }\r\n\r\n  _start() {\r\n    let { text } = this._getMsgContainer();\r\n    text.innerText = \"Before start, we need prepare something...\";\r\n  }\r\n\r\n  _loaded(desc) {\r\n    try {\r\n      let { text } = this._getMsgContainer();\r\n      text.innerText = desc;\r\n    } catch (error) {}\r\n  }\r\n\r\n  _completed(config) {\r\n    try {\r\n      let { text } = this._getMsgContainer();\r\n      text.innerText = \"That's all, enjoy...\";\r\n    } catch (error) {}\r\n    if (config.callback) {\r\n      setTimeout(() => {\r\n        this._removeMsgCon();\r\n        config.callback(this.resMapping);\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  destory() {\r\n    this.disable = true;\r\n    this.count = 0;\r\n    this.index = 0;\r\n    this.resMapping = {};\r\n    this._removeMsgCon();\r\n  }\r\n}\r\n"],"sourceRoot":""}