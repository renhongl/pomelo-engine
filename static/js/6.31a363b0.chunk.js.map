{"version":3,"sources":["example/baseExample.js","example/customizeLoading.js","pomelo-engine/core/renderObj.js","pomelo-engine/core/scene.js","pomelo-engine/core/sceneManager.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js","pomelo-engine/core/event.js","pomelo-engine/core/sys.js","pomelo-engine/core/game.js","pomelo-engine/core/utils.js","pomelo-engine/core/frames.js","pomelo-engine/core/sprite.js","pomelo-engine/core/loading.js","pomelo-engine/core/resource.js","pomelo-engine/core/audio.js","pomelo-engine/core/index.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js"],"names":["BaseExample","container","Object","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","w","offsetWidth","h","offsetHeight","game","Game","scene","sceneManager","createScene","name","x","y","showFrames","run","render","stop","clearAll","destory","config","desc","src","type","Bird","_Sprite","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","owner","dx","isXFlip","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_4__","prototype","call","Sprite","LoadingContent","args","_this","from","percentage","loadingSpeed","ctx","fillStyle","fillRect","strokeStyle","rect","stroke","strokeText","Number","parseInt","CusLoading","configArr","sceneName","clientWidth","clientHeight","loadingContent","addRObj","bringToFront","source","resources","bringToBack","Loading","Example","_this2","cusLoading","Resource","loading","load","then","setBGImg","world","runFrames","Frames","img","bird","i","add","anims","Animations","setAnimSpeed","setAnims","Audio","play","audio","RenderObj","classCallCheck","concat","SID","dy","vx","vy","deg","zIndex","isVisible","canRemove","createClass","xOff","yOff","moveStep","Scene","color","holder","document","createElement","setAttribute","cvs","getContext","setPos","setSize","setColor","appendChild","listeners","rObjs","namedRobjs","style","left","top","width","height","backgroundColor","length","update","removeAllCanRemove","ltns","clear","len","enabled","onBeforeRender","renderRObj","onAfterRender","save","restore","clearRect","display","pattern","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","parentNode","removeChild","renderObj","push","SceneManager","namedScenes","scenes","sc","target","ownKeys","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","defineProperty","_objectSpread","getScene","sortSceneIdx","pop","clean","index","getIndex","temp","EventListener","FrameState","maxFrame","minFrame","currFrame","currTime","elapseTime","_sTime","_sTFrame","start","Date","fTime","Key","_K","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","N0","N1","N2","N3","N4","N5","N6","N7","N8","N9","LEFT","RIGHT","UP","DOWN","ENTER","SPACE","TAB","SHIFT","ALT","CTRL","states","Array","setEnabled","flag","st","clearKeyStates","onkeydown","e","keyCode","onkeyup","pressed","paused","ln","getCurrentScene","fps","self","spf","tHand","setInterval","mainLoop","clearInterval","querySelector","error","maxFrameEle","minFrameEle","currFrameEle","addListener","afterRender","innerText","randomColor","r","Math","random","g","b","degreesToRadians","degrees","PI","duration","frames","dur","splice","FrameCtrl","processFrame","fDur","speed","currFrames","currFIdx","feIdx","isCycle","fsIdx","getCount","cFrames","get","oSpeed","reset","animations","currAnimName","setCurrent","_RenderObj","possibleConstructorReturn","getPrototypeOf","animCtrl","isYFlip","scaleX","scaleY","inherits","isCurrent","remove","sp","getCurrent","getCurrFrame","getNextFrame","translate","hw","hh","rotate","scale","f","drawImage","console","log","disable","count","Promise","resolve","reject","Image","onload","fetch","res","json","arrayBuffer","buffer","resource","loaded","setTimeout","completed","loadImage","loadedEach","loadJson","loadAudio","_getContext","AudioContext","window","webkitAudioContext","context","createBufferSource","decodeAudioData","decodedData","connect","destination","__webpack_require__","d","__webpack_exports__","renderObj_RenderObj","game_Game","utils_namespaceObject","sprite_Sprite","frames_Frames","frames_Animations","resource_Resource","loading_Loading","get_get","property","receiver","Reflect","base","object","hasOwnProperty","_superPropBase"],"mappings":"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","file":"static/js/6.31a363b0.chunk.js","sourcesContent":["import { Game } from \"../pomelo-engine/core\";\r\n\r\nexport default class BaseExample {\r\n  constructor(container) {\r\n    this.container = container;\r\n  }\r\n\r\n  init() {\r\n    this.w = this.container.offsetWidth;\r\n    this.h = this.container.offsetHeight;\r\n    this.game = new Game({ container: this.container });\r\n    this.scene = this.game.sceneManager.createScene({\r\n      name: \"main\",\r\n      x: 0,\r\n      y: 0,\r\n      w: this.w,\r\n      h: this.h\r\n    });\r\n    this.game.showFrames();\r\n    this.game.run(60);\r\n    this.render();\r\n  }\r\n\r\n  render() {}\r\n\r\n  destory() {}\r\n\r\n  stopGame() {\r\n    this.game.stop();\r\n    this.game.sceneManager.clearAll();\r\n    this.destory();\r\n  }\r\n}\r\n","import {\r\n  Frames,\r\n  Animations,\r\n  Resource,\r\n  Sprite,\r\n  Audio,\r\n  Loading\r\n} from \"../pomelo-engine/core\";\r\nimport BaseExample from \"./baseExample\";\r\n\r\nconst config = [\r\n  {\r\n    name: \"bird\",\r\n    desc: \"Need some birds...\",\r\n    src: \"./images/bird.png\",\r\n    type: \"IMAGE\"\r\n  },\r\n  {\r\n    name: \"world\",\r\n    desc: \"Creating awesome world...\",\r\n    src: \"./images/bg.jpg\",\r\n    type: \"IMAGE\"\r\n  },\r\n  {\r\n    name: \"json\",\r\n    desc: \"Getting nice knowloadge...\",\r\n    src: \"./data/config.json\",\r\n    type: \"JSON\"\r\n  },\r\n  {\r\n    name: \"audio\",\r\n    desc: \"Getting sound for world...\",\r\n    src: \"./media/horse.ogg\",\r\n    type: \"AUDIO\"\r\n  }\r\n];\r\n\r\nexport class Bird extends Sprite {\r\n  update() {\r\n    let w = this.owner.w;\r\n    if (this.x < 20 || this.x > w - 20) {\r\n      this.dx = -this.dx;\r\n      this.isXFlip = this.dx < 0;\r\n    }\r\n    super.update();\r\n  }\r\n}\r\n\r\nclass LoadingContent extends Sprite {\r\n  constructor(args) {\r\n    super(args);\r\n    this.w = 200;\r\n    this.h = 20;\r\n    this.from = 0;\r\n    this.percentage = 0;\r\n    this.loadingSpeed = args.loadingSpeed || 10;\r\n  }\r\n\r\n  render(ctx) {\r\n    ctx.fillStyle = \"green\";\r\n    ctx.fillRect(this.x, this.y, this.from, this.h);\r\n    ctx.strokeStyle = \"blue\";\r\n    ctx.rect(this.x, this.y, this.w, this.h);\r\n    ctx.stroke();\r\n    ctx.strokeText(\r\n      Number.parseInt((this.from / this.w) * 100) + \"%\",\r\n      this.x + 80,\r\n      this.y - 10\r\n    );\r\n  }\r\n\r\n  update() {\r\n    if (this.from < this.w * this.percentage) {\r\n      this.from += this.loadingSpeed;\r\n    }\r\n    super.update();\r\n  }\r\n}\r\n\r\nclass CusLoading extends Loading {\r\n  start(configArr) {\r\n    this.container = this.game.container;\r\n    this.sceneName = \"loadingSc\";\r\n    this.scene = this.game.sceneManager.createScene({\r\n      name: this.sceneName,\r\n      x: 0,\r\n      y: 0,\r\n      w: this.container.clientWidth,\r\n      h: this.container.clientHeight\r\n    });\r\n    this.loadingContent = new LoadingContent({\r\n      x: this.container.clientWidth / 2 - 100,\r\n      y: this.container.clientHeight / 2 - 10\r\n    });\r\n    this.scene.addRObj(this.loadingContent);\r\n    this.game.sceneManager.bringToFront(this.sceneName);\r\n  }\r\n\r\n  loaded(config, source, percentage) {\r\n    this.loadingContent.percentage = percentage;\r\n  }\r\n\r\n  completed(resources) {\r\n    this.game.sceneManager.bringToBack(this.sceneName);\r\n  }\r\n}\r\n\r\nexport default class Example extends BaseExample {\r\n  render() {\r\n    let cusLoading = new CusLoading();\r\n    let resourceMgmt = new Resource({\r\n      config,\r\n      game: this.game,\r\n      loading: cusLoading\r\n    });\r\n    resourceMgmt.load().then(resources => {\r\n      this.scene.setBGImg(resources.world, 1);\r\n      let runFrames = new Frames({\r\n        name: \"b_run\",\r\n        img: resources.bird\r\n      });\r\n      for (let i = 0; i < 8; i++) {\r\n        runFrames.add(130.5 * i, 0, 130.5, 80);\r\n      }\r\n      let anims = new Animations();\r\n      anims.add(\"run\", runFrames, true);\r\n      let bird = new Bird({ x: 50, y: 50, w: 80, h: 80, dx: 1 });\r\n      bird.setAnimSpeed(0.5);\r\n      bird.setAnims(anims, \"run\");\r\n      this.scene.addRObj(bird);\r\n      Audio.play(resources.audio);\r\n    });\r\n  }\r\n}\r\n","export class RenderObj {\r\n  static SID = 0;\r\n\r\n  constructor(args) {\r\n    this.name = args.name || `Unnamed_${++RenderObj.SID}`;\r\n    this.owner = args.owner || null;\r\n    //x, y 方向坐标\r\n    this.x = args.x || 0;\r\n    this.y = args.y || 0;\r\n    //对象的宽度和高度\r\n    this.w = args.w || 0;\r\n    this.h = args.h || 0;\r\n    //x和y方向的速度\r\n    this.dx = args.dx || 0;\r\n    this.dy = args.dy || 0;\r\n    //x和y方向的加速度\r\n    this.vx = args.vx || 0;\r\n    this.vy = args.vy || 0;\r\n    this.deg = args.deg || 0;\r\n    this.zIndex = args.zIndex || 0;\r\n    this.isVisible = args.isVisible || true;\r\n    this.canRemove = args.canRemove || false;\r\n  }\r\n\r\n  //设置位置\r\n  moveTo(x, y) {\r\n    this.x = x || this.x;\r\n    this.y = y || this.y;\r\n  }\r\n\r\n  //移动\r\n  move(xOff, yOff) {\r\n    this.x += xOff;\r\n    this.y += yOff;\r\n  }\r\n\r\n  //移动一小步\r\n  moveStep() {\r\n    this.dx += this.vx;\r\n    this.dy += this.vy;\r\n    this.x += this.dx;\r\n    this.y += this.dy;\r\n  }\r\n\r\n  //旋转角度\r\n  rotate(deg) {\r\n    this.deg = deg;\r\n  }\r\n\r\n  //更新方法， 每一帧用\r\n  update() {\r\n    this.moveStep();\r\n  }\r\n\r\n  render(ctx) {\r\n    return;\r\n  }\r\n}\r\n","export class Scene {\r\n  static SID = 0;\r\n  constructor(args) {\r\n    args = args || {};\r\n    this.name = args.name || \"Unnamed_\" + ++Scene.SID;\r\n    this.x = args.x || 0;\r\n    this.y = args.y || 0;\r\n    this.w = args.w || 320;\r\n    this.h = args.h || 280;\r\n    //背景元素及其样式\r\n    this.color = args.color || \"#fff\";\r\n    this.holder = document.createElement(\"div\");\r\n    this.holder.setAttribute(\"id\", `sc_${this.name}`);\r\n    this.holder.setAttribute(\"class\", \"sc_container\");\r\n    //画布及其样式\r\n    this.cvs = document.createElement(\"canvas\");\r\n    this.cvs.setAttribute(\"id\", `cv_${this.name}`);\r\n    this.cvs.setAttribute(\"class\", \"sc_cv\");\r\n    this.ctx = this.cvs.getContext(\"2d\");\r\n    this.setPos();\r\n    this.setSize();\r\n    this.setColor(this.color);\r\n    this.holder.appendChild(this.cvs);\r\n    args.container.appendChild(this.holder);\r\n    this.listeners = [];\r\n    this.rObjs = [];\r\n    this.namedRobjs = {};\r\n  }\r\n\r\n  //设置场景位置\r\n  setPos(x, y) {\r\n    this.x = x || this.x;\r\n    this.y = y || this.y;\r\n    this.holder.style.left = this.x + \"px\";\r\n    this.holder.style.top = this.y + \"px\";\r\n  }\r\n\r\n  //设置场景大小\r\n  setSize(w, h) {\r\n    this.w = w || this.w;\r\n    this.h = h || this.h;\r\n    this.holder.style.width = this.w;\r\n    this.holder.style.height = this.h;\r\n    this.cvs.setAttribute(\"width\", this.w);\r\n    this.cvs.setAttribute(\"height\", this.h);\r\n  }\r\n\r\n  //设置场景背景颜色\r\n  setColor(color) {\r\n    this.color = color || \"#fff\";\r\n    this.holder.style.backgroundColor = this.color;\r\n  }\r\n\r\n  //更新所有精灵\r\n  update() {\r\n    for (let i = 0; i < this.rObjs.length; i++) {\r\n      this.rObjs[i].update();\r\n    }\r\n    this.removeAllCanRemove();\r\n  }\r\n\r\n  removeAllCanRemove() {}\r\n\r\n  //渲染所有精灵\r\n  render() {\r\n    let ltns = this.listeners;\r\n    this.clear();\r\n    for (let i = 0, len = ltns.length; i < len; i++) {\r\n      ltns[i].enabled && ltns[i].onBeforeRender(this);\r\n    }\r\n    this.renderRObj();\r\n    for (let i = 0, len = ltns.length; i < len; i++) {\r\n      ltns[i].enabled && ltns[i].onAfterRender(this);\r\n    }\r\n  }\r\n\r\n  //渲染所有对象\r\n  renderRObj() {\r\n    for (let i = 0, len = this.rObjs.length; i < len; i++) {\r\n      this.ctx.save();\r\n      this.rObjs[i].isVisible && this.rObjs[i].render(this.ctx);\r\n      this.ctx.restore();\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.ctx.clearRect(0, 0, this.w, this.h);\r\n  }\r\n\r\n  show() {\r\n    this.holder.style.display = \"block\";\r\n  }\r\n\r\n  hide() {\r\n    this.holder.style.display = \"none\";\r\n  }\r\n\r\n  //设置场景背景图片\r\n  setBGImg(img, pattern) {\r\n    this.holder.style.backgroundImage = `url(\"${img.src}\")`;\r\n    switch (pattern) {\r\n      case 0:\r\n        this.holder.style.backgroundRepeat = \"no-repeat\";\r\n        this.holder.style.backgroundPosition = \"center\";\r\n        break;\r\n      case 1:\r\n        this.holder.style.backgroundSize = `${this.w}px, ${this.h}px`;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  clean() {\r\n    this.cvs.parentNode.removeChild(this.cvs);\r\n    this.holder.parentNode.removeChild(this.holder);\r\n    this.cvs = this.holder = this.ctx = null;\r\n    // this.rObjs = [];\r\n  }\r\n\r\n  //将可以展示的对象添加到该场景\r\n  addRObj(renderObj) {\r\n    renderObj.owner = this;\r\n    this.rObjs.push(renderObj);\r\n    this.namedRobjs[renderObj.name] = renderObj;\r\n  }\r\n}\r\n","import { Scene } from \"./scene\";\r\n\r\nexport class SceneManager {\r\n  constructor(args) {\r\n    this.namedScenes = {};\r\n    this.scenes = [];\r\n    this.container = args.container;\r\n  }\r\n\r\n  createScene(args) {\r\n    let sc = new Scene({ ...args, container: this.container });\r\n    this.push(sc);\r\n    return sc;\r\n  }\r\n\r\n  sortSceneIdx() {\r\n    for (let i = 0, len = this.scenes.length; i < len; i++) {\r\n      let sc = this.scenes[i];\r\n      sc.holder.style.zIndex = i;\r\n    }\r\n  }\r\n\r\n  push(scene) {\r\n    if (!this.getScene(scene.name)) {\r\n      this.scenes.push(scene);\r\n      this.namedScenes[scene.name] = scene;\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  pop() {\r\n    let sc = this.scenes.pop();\r\n    if (sc !== null) {\r\n      sc.clean();\r\n      delete this.namedScenes[sc.name];\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  getIndex(name) {\r\n    for (let i = 0; i < this.scenes.length; i++) {\r\n      if (name === this.scenes[i].name) {\r\n        return i;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  bringToBack(name) {\r\n    let scenes = this.scenes;\r\n    let index = this.getIndex(name);\r\n    if (index !== 0) {\r\n      let temp = scenes[0];\r\n      scenes[0] = scenes[index];\r\n      scenes[index] = temp;\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  bringToFront(name) {\r\n    let scenes = this.scenes;\r\n    let index = this.getIndex(name);\r\n    if (index !== scenes.length - 1) {\r\n      let temp = scenes[scenes.length - 1];\r\n      scenes[scenes.length - 1] = scenes[index];\r\n      scenes[index] = temp;\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  remove(name) {\r\n    let sc = this.getScene(name);\r\n    if (sc !== null) {\r\n      sc.clean();\r\n      delete this.namedScenes[name];\r\n      //TODO remove from this.scenes\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  getScene(name) {\r\n    return this.namedScenes[name];\r\n  }\r\n\r\n  getCurrentScene() {\r\n    return this.scenes[this.scenes.length - 1];\r\n  }\r\n\r\n  clearAll() {\r\n    for (let i = 0; i < this.scenes.length; i++) {\r\n      this.scenes[i].clean();\r\n    }\r\n    this.namedScenes = {};\r\n    this.scenes = [];\r\n  }\r\n}\r\n","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export class EventListener {\r\n  constructor(args) {\r\n    this.enabled = true;\r\n    this.onBeforeRender = args[\"beforeRender\"] || this.onBeforeRender;\r\n    this.onAfterRender = args[\"afterRender\"] || this.onAfterRender;\r\n  }\r\n\r\n  onBeforeRender() {\r\n    return true;\r\n  }\r\n\r\n  onAfterRender() {\r\n    return true;\r\n  }\r\n}\r\n","export const FrameState = {\r\n  //最大帧数\r\n  maxFrame: 0,\r\n  //最小帧数\r\n  minFrame: 9999,\r\n  //即时帧数\r\n  currFrame: 0,\r\n  //当前时间\r\n  currTime: 0,\r\n  //每帧流逝的时间\r\n  elapseTime: 0,\r\n  //用于统计每秒开始时间\r\n  _sTime: 0,\r\n  //用于统计每秒总帧数\r\n  _sTFrame: 0,\r\n\r\n  //启动帧状态检测器\r\n  start() {\r\n    this.currTime = this._sTime = new Date();\r\n  },\r\n\r\n  //每帧在游戏循环前调用此方法，更新和计算帧数\r\n  update() {\r\n    let fTime = new Date();\r\n    if (fTime - this._sTime >= 1000) {\r\n      this.currFrame = this._sTFrame;\r\n      this.maxFrame =\r\n        this.currFrame > this.maxFrame ? this.currFrame : this.maxFrame;\r\n      this.minFrame =\r\n        this.currFrame < this.minFrame ? this.currFrame : this.minFrame;\r\n      this._sTFrame = 0;\r\n      this._sTime = fTime;\r\n    } else {\r\n      this._sTFrame += 1;\r\n    }\r\n    this.elapseTime = fTime - this.currTime;\r\n    this.currTime = fTime;\r\n  },\r\n\r\n  clear() {\r\n    this.maxFrame = 0;\r\n    this.minFrame = 9999;\r\n    this.currFrame = 0;\r\n    this.currTime = 0;\r\n    this.elapseTime = 0;\r\n    this._sTime = 0;\r\n    this._sTFrame = 0;\r\n  }\r\n};\r\n\r\nexport const Key = (function() {\r\n  let _K = {\r\n    A: 65,\r\n    B: 66,\r\n    C: 67,\r\n    D: 68,\r\n    E: 69,\r\n    F: 70,\r\n    G: 71,\r\n    H: 72,\r\n    I: 73,\r\n    J: 74,\r\n    K: 75,\r\n    L: 76,\r\n    M: 77,\r\n    N: 78,\r\n    O: 79,\r\n    P: 80,\r\n    Q: 81,\r\n    R: 82,\r\n    S: 83,\r\n    T: 84,\r\n    U: 85,\r\n    V: 86,\r\n    W: 87,\r\n    X: 88,\r\n    Y: 89,\r\n    Z: 90,\r\n    N0: 48,\r\n    N1: 49,\r\n    N2: 50,\r\n    N3: 51,\r\n    N4: 52,\r\n    N5: 53,\r\n    N6: 54,\r\n    N7: 55,\r\n    N8: 56,\r\n    N9: 57,\r\n    LEFT: 37,\r\n    RIGHT: 39,\r\n    UP: 38,\r\n    DOWN: 40,\r\n    ENTER: 13,\r\n    SPACE: 32,\r\n    TAB: 9,\r\n    SHIFT: 16,\r\n    ALT: 18,\r\n    CTRL: 17,\r\n\r\n    states: new Array(255),\r\n    setEnabled(flag) {\r\n      if (flag) {\r\n        let st = this.states;\r\n        this.clearKeyStates();\r\n        document.onkeydown = e => {\r\n          st[e.keyCode] = 1;\r\n        };\r\n        document.onkeyup = e => {\r\n          st[e.keyCode] = 0;\r\n        };\r\n      } else {\r\n        document.onkeydown = null;\r\n        document.onkeyup = null;\r\n      }\r\n    },\r\n\r\n    pressed(key) {\r\n      return this.states[key];\r\n    },\r\n\r\n    clearKeyStates() {\r\n      for (let i = 0; i < 255; i++) {\r\n        this.states[i] = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  _K.setEnabled(true);\r\n  return _K;\r\n})();\r\n","import { FrameState } from \"./sys\";\r\nimport { SceneManager } from \"./sceneManager\";\r\nimport { EventListener } from \"./event\";\r\n\r\nexport class Game {\r\n  //初始化游戏\r\n  constructor(args) {\r\n    this.paused = false;\r\n    this.listeners = [];\r\n    this.container = args.container;\r\n    this.sceneManager = new SceneManager({ container: args.container });\r\n  }\r\n\r\n  //添加监听器\r\n  addListener(ln) {\r\n    this.listeners.push(ln);\r\n  }\r\n\r\n  //清除监听器\r\n  clearListener() {\r\n    this.listeners.length = 0;\r\n  }\r\n\r\n  //游戏主循环\r\n  mainLoop() {\r\n    let ltns = this.listeners;\r\n    for (let i = 0; i < ltns.length; i++) {\r\n      ltns[i].enabled && ltns[i].onBeforeRender();\r\n    }\r\n    let scene = this.sceneManager.getCurrentScene();\r\n    if (scene) {\r\n      scene.update();\r\n      scene.render();\r\n    }\r\n    for (let i = 0; i < ltns.length; i++) {\r\n      ltns[i].enabled && ltns[i].onAfterRender();\r\n    }\r\n  }\r\n\r\n  //启动游戏\r\n  run(fps) {\r\n    fps = fps || 60;\r\n    let self = this,\r\n      spf = 1000 / fps || 0;\r\n\r\n    //开始帧检测器\r\n    FrameState.start();\r\n    self.tHand = setInterval(function() {\r\n      //更新帧数状态\r\n      FrameState.update();\r\n      if (!self.paused) {\r\n        self.mainLoop();\r\n      }\r\n    }, spf);\r\n  }\r\n\r\n  //暂停游戏\r\n  pause() {\r\n    this.paused = true;\r\n  }\r\n\r\n  //停止游戏\r\n  stop() {\r\n    clearInterval(this.tHand);\r\n    FrameState.clear();\r\n  }\r\n\r\n  showFrames() {\r\n    let container = this.container;\r\n    try {\r\n      container.removeChild(document.querySelector(\".max-frame-ele\"));\r\n      container.removeChild(document.querySelector(\".min-frame-ele\"));\r\n      container.removeChild(document.querySelector(\".curr-frame-ele\"));\r\n    } catch (error) {}\r\n\r\n    let maxFrameEle = document.createElement(\"div\");\r\n    let minFrameEle = document.createElement(\"div\");\r\n    let currFrameEle = document.createElement(\"div\");\r\n    maxFrameEle.setAttribute(\"class\", \"max-frame-ele\");\r\n    minFrameEle.setAttribute(\"class\", \"min-frame-ele\");\r\n    currFrameEle.setAttribute(\"class\", \"curr-frame-ele\");\r\n    container.appendChild(maxFrameEle);\r\n    container.appendChild(minFrameEle);\r\n    container.appendChild(currFrameEle);\r\n    this.addListener(\r\n      new EventListener({\r\n        afterRender() {\r\n          maxFrameEle.innerText = \"最大帧数：\" + FrameState.maxFrame;\r\n          minFrameEle.innerText = \"最小帧数：\" + FrameState.minFrame;\r\n          currFrameEle.innerText = \"当前帧数：\" + FrameState.currFrame;\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n","export const randomColor = function() {\r\n  let r = Number.parseInt(Math.random() * 256);\r\n  let g = Number.parseInt(Math.random() * 256);\r\n  let b = Number.parseInt(Math.random() * 256);\r\n  return `rgba(${r}, ${g}, ${b}, 1)`;\r\n};\r\n\r\nexport function degreesToRadians(degrees) {\r\n  var pi = Math.PI;\r\n  return degrees * (pi / 180);\r\n}\r\n","import { FrameState } from \"./sys\";\r\n\r\nexport class Frames {\r\n  constructor(args) {\r\n    this.name = args.name;\r\n    this.duration = args.duration || 50;\r\n    this.frames = [];\r\n    this.img = args.img;\r\n  }\r\n\r\n  //添加帧数据\r\n  add(x, y, w, h, img, dur) {\r\n    dur = dur || this.duration;\r\n    img = img || this.img;\r\n    this.frames.push([img, x, y, w, h, dur]);\r\n  }\r\n\r\n  //插入帧数据\r\n  insert(index, x, y, w, h, img, dur) {\r\n    dur = dur || this.duration;\r\n    img = img || this.img;\r\n    this.frames.splice(index, 0, [img, x, y, w, h, dur]);\r\n  }\r\n\r\n  //移出帧数据\r\n  remove(index) {\r\n    this.frames.splice(index, 1);\r\n  }\r\n\r\n  //删除所有帧\r\n  clear() {\r\n    this.frames = [];\r\n  }\r\n\r\n  //获取帧数据\r\n  get(index) {\r\n    return this.frames[index];\r\n  }\r\n\r\n  //获取总数\r\n  getCount() {\r\n    return this.frames.length;\r\n  }\r\n}\r\n\r\nexport class Animations {\r\n  constructor(args) {\r\n    this.anims = {};\r\n  }\r\n\r\n  //添加帧动画集合\r\n  add(name, frames) {\r\n    this.anims[name] = frames;\r\n  }\r\n\r\n  //删除帧动画集合\r\n  remove(name) {\r\n    this.anims[name] = null;\r\n  }\r\n\r\n  //清空帧动画集合\r\n  clear() {\r\n    this.anims = [];\r\n  }\r\n\r\n  //获取当前帧动画\r\n  get(name) {\r\n    return this.anims[name];\r\n  }\r\n}\r\n\r\nexport class FrameCtrl {\r\n  constructor(args) {\r\n    //默认动画处理函数\r\n    function defProcessFrame() {\r\n      this.fDur += FrameState.elapseTime * this.speed;\r\n      if (this.fDur >= this.currFrames.frames[this.currFIdx][5]) {\r\n        this.fDur = 0;\r\n        if (this.currFIdx < this.feIdx - 1) {\r\n          ++this.currFIdx;\r\n        } else {\r\n          if (this.isCycle) {\r\n            this.currFIdx = this.fsIdx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.processFrame = args.processFrame || defProcessFrame;\r\n  }\r\n\r\n  reset() {\r\n    this.fsIdx = 0;\r\n    this.feIdx = this.currFrames.getCount();\r\n    this.currFIdx = 0;\r\n    this.isCycle = true;\r\n    this.fDur = 0;\r\n    this.speed = 1;\r\n  }\r\n\r\n  setCurrent(name) {\r\n    let cFrames = this.anims.get(name);\r\n    if (this.currFrames !== cFrames) {\r\n      let oSpeed = this.speed || 1;\r\n      this.currFrames = cFrames;\r\n      this.reset();\r\n      this.speed = oSpeed;\r\n    }\r\n  }\r\n\r\n  getCurrent() {\r\n    return this.currFrames;\r\n  }\r\n\r\n  setAnims(animations, currAnimName) {\r\n    this.anims = animations;\r\n    currAnimName = currAnimName || \"def\";\r\n    this.setCurrent(currAnimName);\r\n  }\r\n\r\n  getCurrFrameIdx() {\r\n    return this.currFIdx;\r\n  }\r\n\r\n  getCurrFrame() {\r\n    return this.currFrames.get(this.currFIdx);\r\n  }\r\n\r\n  getNextFrame() {\r\n    this.processFrame();\r\n    return this.currFrames.get(this.currFIdx);\r\n  }\r\n}\r\n","import { RenderObj } from \"./renderObj\";\r\nimport { FrameCtrl } from \"./frames\";\r\nimport { degreesToRadians } from \"./utils\";\r\n\r\nexport class Sprite extends RenderObj {\r\n  constructor(args) {\r\n    super(args);\r\n    this.anims = null;\r\n    this.animCtrl = new FrameCtrl({});\r\n    this.isXFlip = false;\r\n    this.isYFlip = false;\r\n    this.scaleX = 1;\r\n    this.scaleY = 1;\r\n  }\r\n\r\n  setAnims(animations, currAnimName) {\r\n    currAnimName = currAnimName || \"def\";\r\n    this.anims = animations;\r\n    this.animCtrl.setAnims(animations, currAnimName);\r\n  }\r\n\r\n  addAnim(name, frames, isCurrent) {\r\n    this.anims.add(name, frames);\r\n    isCurrent && this.animCtrl.setCurrent(name);\r\n  }\r\n\r\n  removeAnim(name) {\r\n    this.anims.remove(name);\r\n  }\r\n\r\n  setCAnim(name) {\r\n    this.animCtrl.setCurrent(name);\r\n  }\r\n\r\n  setAnimSpeed(sp) {\r\n    this.animCtrl.speed = sp;\r\n  }\r\n\r\n  getAnim(name) {\r\n    return this.anims.get(name);\r\n  }\r\n\r\n  getCurrentAnim() {\r\n    return this.animCtrl.getCurrent();\r\n  }\r\n\r\n  getCurrentFrame() {\r\n    return this.animCtrl.getCurrFrame();\r\n  }\r\n\r\n  getNextFrame() {\r\n    return this.animCtrl.getNextFrame();\r\n  }\r\n\r\n  render(ctx) {\r\n    ctx.translate(this.x, this.y);\r\n    let hw = 0.5 * this.w;\r\n    let hh = 0.5 * this.h;\r\n    let scaleX = this.isXFlip ? -this.scaleX : this.scaleX;\r\n    let scaleY = this.isYFlip ? -this.scaleY : this.scaleY;\r\n    if (this.deg !== 0) {\r\n      ctx.rotate(degreesToRadians(this.deg));\r\n    }\r\n    ctx.scale(scaleX, scaleY);\r\n    let f = this.getNextFrame();\r\n    ctx.drawImage(f[0], f[1], f[2], f[3], f[4], -hw, -hh, this.w, this.h);\r\n  }\r\n}\r\n","export class Loading {\r\n  constructor(args) {\r\n    this.game = args && args.game;\r\n  }\r\n\r\n  start(configArr) {\r\n    console.log(\"Starting Loading...\");\r\n  }\r\n\r\n  loaded(config, source, percentage) {\r\n    console.log(`Loading ${config.name}...`);\r\n  }\r\n\r\n  completed(resources) {\r\n    console.log(\"Completed Loading...\");\r\n  }\r\n}\r\n","import { Loading } from \"./loading\";\r\n\r\nexport class Resource {\r\n  constructor(args) {\r\n    this.index = 0;\r\n    this.resources = {};\r\n    this.disable = false;\r\n    this.configArr = args.config;\r\n    this.count = args.config.length;\r\n    if (args.loading) {\r\n      args.loading.game = args.game;\r\n    }\r\n    this.loading = args.loading || new Loading({ game: args.game });\r\n  }\r\n\r\n  loadImage(src) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        let img = new Image();\r\n        img.onload = () => {\r\n          resolve(img);\r\n        };\r\n        img.src = src;\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadJson(src) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        fetch(src).then(res => {\r\n          res.json().then(json => {\r\n            resolve(json);\r\n          });\r\n        });\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadAudio(src) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        fetch(src).then(res =>\r\n          res.arrayBuffer().then(buffer => {\r\n            resolve(buffer);\r\n          })\r\n        );\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadedEach(resolve, config, resource) {\r\n    this.index++;\r\n    this.loading.loaded(config, resource, this.index / this.count);\r\n    this.resources[config.name] = resource;\r\n    if (this.index >= this.count) {\r\n      setTimeout(() => {\r\n        this.loading.completed(this.resources);\r\n        resolve(this.resources);\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  load() {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        this.loading.start(this.configArr);\r\n        this.configArr.forEach(config => {\r\n          switch (config.type) {\r\n            case \"IMAGE\":\r\n              this.loadImage(config.src).then(resource => {\r\n                this.loadedEach(resolve, config, resource);\r\n              });\r\n              break;\r\n            case \"JSON\":\r\n              this.loadJson(config.src).then(resource => {\r\n                this.loadedEach(resolve, config, resource);\r\n              });\r\n              break;\r\n            case \"AUDIO\":\r\n              this.loadAudio(config.src).then(resource => {\r\n                this.loadedEach(resolve, config, resource);\r\n              });\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        });\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n}\r\n","export const Audio = {\r\n  _getContext: function() {\r\n    try {\r\n      return (\r\n        (AudioContext && new window.AudioContext()) ||\r\n        new window.webkitAudioContext()\r\n      );\r\n    } catch (e) {\r\n      console.log(\"Your browser can not support Web Audio API\");\r\n    }\r\n    return null;\r\n  },\r\n\r\n  play(buffer) {\r\n    let context = this._getContext();\r\n    let source = context.createBufferSource();\r\n    context.decodeAudioData(buffer, function(decodedData) {\r\n      source.buffer = decodedData;\r\n      source.connect(context.destination);\r\n      source.start(0);\r\n    });\r\n  }\r\n};\r\n","import { RenderObj } from \"./renderObj\";\r\nimport { Scene } from \"./scene\";\r\nimport { SceneManager } from \"./sceneManager\";\r\nimport { EventListener } from \"./event\";\r\nimport { FrameState, Key } from \"./sys\";\r\nimport { Game } from \"./game\";\r\nimport * as utils from \"./utils\";\r\nimport { Sprite } from \"./sprite\";\r\nimport { Frames, Animations, FrameCtrl } from \"./frames\";\r\nimport { Resource } from \"./resource\";\r\nimport { Audio } from \"./audio\";\r\nimport { Loading } from \"./loading\";\r\n\r\nexport {\r\n  RenderObj,\r\n  Scene,\r\n  SceneManager,\r\n  EventListener,\r\n  FrameState,\r\n  Game,\r\n  utils,\r\n  Sprite,\r\n  Frames,\r\n  Animations,\r\n  FrameCtrl,\r\n  Key,\r\n  Resource,\r\n  Audio,\r\n  Loading\r\n};\r\n","import getPrototypeOf from \"./getPrototypeOf\";\nimport superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}"],"sourceRoot":""}