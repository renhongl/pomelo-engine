{"version":3,"sources":["example/baseExample.js","example/ballGame.js","pomelo-engine/core/renderObj.js","pomelo-engine/core/scene.js","pomelo-engine/core/sceneManager.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js","pomelo-engine/core/event.js","pomelo-engine/core/sys.js","pomelo-engine/core/game.js","pomelo-engine/core/utils.js","pomelo-engine/core/frames.js","pomelo-engine/core/sprite.js","pomelo-engine/core/loading.js","pomelo-engine/core/resource.js","pomelo-engine/core/audio.js","pomelo-engine/core/index.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js"],"names":["BaseExample","container","Object","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","w","offsetWidth","h","offsetHeight","game","Game","scene","sceneManager","createScene","name","x","y","showFrames","run","render","stop","clearAll","destory","End","_Sprite","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","apply","arguments","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__","key","value","ctx","font","strokeText","Sprite","Stick","_Sprite2","args","_this","call","color","speed","beginPath","fillStyle","fillRect","closePath","Key","pressed","LEFT","dx","RIGHT","owner","_home_travis_build_renhongl_pomelo_engine_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_0__","prototype","Ball","_this2","r","stick","state","bricks","arc","Math","PI","fill","SPACE","dy","ballHitStick","ballHitBricks","ballOut","showOver","endSc","clientWidth","clientHeight","end","addRObj","bringToFront","minX","maxX","minY","maxY","i","length","isVisible","generateReward","brick","reward","Reward","concat","Brick","_this3","_this4","strokeStyle","MyStick","_this5","originW","originSpeed","stickHitReward","status","_this6","setTimeout","resetState","rObjs","includes","updateState","LoadingContent","_this7","from","percentage","loadingSpeed","rect","stroke","Number","parseInt","CusLoading","configArr","sceneName","loadingContent","config","source","resources","bringToBack","Loading","Example","brickData","j","Boolean","push","_this8","Resource","desc","src","type","loading","load","then","getStick","getBricks","ball","getBall","RenderObj","classCallCheck","SID","vx","vy","deg","zIndex","canRemove","createClass","xOff","yOff","moveStep","Scene","holder","document","createElement","setAttribute","cvs","getContext","setPos","setSize","setColor","appendChild","listeners","namedRobjs","style","left","top","width","height","backgroundColor","update","removeAllCanRemove","ltns","clear","len","enabled","onBeforeRender","renderRObj","onAfterRender","save","restore","clearRect","display","img","pattern","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","parentNode","removeChild","renderObj","SceneManager","namedScenes","scenes","sc","target","ownKeys","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","defineProperty","_objectSpread","getScene","sortSceneIdx","pop","clean","index","getIndex","temp","EventListener","FrameState","maxFrame","minFrame","currFrame","currTime","elapseTime","_sTime","_sTFrame","start","Date","fTime","_K","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","N0","N1","N2","N3","N4","N5","N6","N7","N8","N9","UP","DOWN","ENTER","TAB","SHIFT","ALT","CTRL","states","Array","setEnabled","flag","st","clearKeyStates","onkeydown","e","keyCode","onkeyup","paused","ln","getCurrentScene","fps","self","spf","tHand","setInterval","mainLoop","clearInterval","querySelector","error","maxFrameEle","minFrameEle","currFrameEle","addListener","afterRender","innerText","randomColor","random","g","b","degreesToRadians","degrees","Frames","duration","frames","dur","splice","Animations","anims","FrameCtrl","processFrame","fDur","currFrames","currFIdx","feIdx","isCycle","fsIdx","getCount","cFrames","get","oSpeed","reset","animations","currAnimName","setCurrent","_RenderObj","possibleConstructorReturn","getPrototypeOf","animCtrl","isXFlip","isYFlip","scaleX","scaleY","inherits","setAnims","isCurrent","add","remove","sp","getCurrent","getCurrFrame","getNextFrame","translate","hw","hh","rotate","scale","f","drawImage","console","log","disable","count","Promise","resolve","reject","Image","onload","fetch","res","json","arrayBuffer","buffer","resource","loaded","completed","loadImage","loadedEach","loadJson","loadAudio","Audio","_getContext","AudioContext","window","webkitAudioContext","play","context","createBufferSource","decodeAudioData","decodedData","connect","destination","__webpack_require__","d","__webpack_exports__","renderObj_RenderObj","game_Game","utils_namespaceObject","sprite_Sprite","frames_Frames","frames_Animations","resource_Resource","loading_Loading","get_get","property","receiver","Reflect","base","object","hasOwnProperty","_superPropBase"],"mappings":"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","file":"static/js/4.60bf961f.chunk.js","sourcesContent":["import { Game } from \"../pomelo-engine/core\";\r\n\r\nexport default class BaseExample {\r\n  constructor(container) {\r\n    this.container = container;\r\n  }\r\n\r\n  init() {\r\n    this.w = this.container.offsetWidth;\r\n    this.h = this.container.offsetHeight;\r\n    this.game = new Game({ container: this.container });\r\n    this.scene = this.game.sceneManager.createScene({\r\n      name: \"main\",\r\n      x: 0,\r\n      y: 0,\r\n      w: this.w,\r\n      h: this.h\r\n    });\r\n    this.game.showFrames();\r\n    this.game.run(60);\r\n    this.render();\r\n  }\r\n\r\n  render() {}\r\n\r\n  destory() {}\r\n\r\n  stopGame() {\r\n    this.game.stop();\r\n    this.game.sceneManager.clearAll();\r\n    this.destory();\r\n  }\r\n}\r\n","import { Sprite, Key, Resource, Loading } from \"../pomelo-engine/core\";\r\nimport BaseExample from \"./baseExample\";\r\n\r\nexport class End extends Sprite {\r\n  render(ctx) {\r\n    ctx.font = \"30px Arial\";\r\n    ctx.strokeText(\"Game Over!\", 10, 50);\r\n  }\r\n}\r\n\r\nexport class Stick extends Sprite {\r\n  constructor(args) {\r\n    super(args);\r\n    this.color = args.color;\r\n    this.speed = args.speed || 5;\r\n  }\r\n  render(ctx) {\r\n    ctx.beginPath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.fillRect(this.x, this.y, this.w, this.h);\r\n    ctx.closePath();\r\n  }\r\n\r\n  update() {\r\n    if (Key.pressed(Key.LEFT)) {\r\n      this.dx = -this.speed;\r\n    } else if (Key.pressed(Key.RIGHT)) {\r\n      this.dx = this.speed;\r\n    } else {\r\n      this.dx = 0;\r\n    }\r\n    if (this.x <= 0 && Key.pressed(Key.LEFT)) {\r\n      this.dx = 0;\r\n    }\r\n    if (this.x + this.w >= this.owner.w && Key.pressed(Key.RIGHT)) {\r\n      this.dx = 0;\r\n    }\r\n    super.update();\r\n  }\r\n}\r\n\r\nclass Ball extends Sprite {\r\n  constructor(args) {\r\n    super(args);\r\n    this.r = args.r;\r\n    this.color = \"#000\";\r\n    this.stick = args.stick;\r\n    this.state = 0;\r\n    this.bricks = args.bricks;\r\n    this.game = args.game;\r\n  }\r\n\r\n  render(ctx) {\r\n    ctx.beginPath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  }\r\n\r\n  update() {\r\n    if (this.state === 0 && Key.pressed(Key.SPACE)) {\r\n      this.dx = -3;\r\n      this.dy = -3;\r\n      this.state = 1;\r\n    }\r\n    if (this.state === 2) {\r\n      return;\r\n    }\r\n    let w = this.owner.w,\r\n      h = this.owner.h;\r\n\r\n    if (this.x < this.r || this.x > w - this.r) {\r\n      this.dx = -this.dx;\r\n    }\r\n    if (this.y < this.r || this.y > h - this.r) {\r\n      this.dy = -this.dy;\r\n    }\r\n    this.ballHitStick();\r\n    this.ballHitBricks();\r\n    this.ballOut();\r\n    super.update();\r\n  }\r\n\r\n  ballOut() {\r\n    if (this.y + this.r * 2 >= this.owner.h) {\r\n      this.state = 2;\r\n      this.showOver();\r\n    }\r\n  }\r\n\r\n  showOver() {\r\n    let endSc = this.game.sceneManager.createScene({\r\n      name: \"endSc\",\r\n      x: this.game.container.clientWidth / 2 - 100,\r\n      y: this.game.container.clientHeight / 2 - 50,\r\n      w: 200,\r\n      h: 100\r\n    });\r\n    let end = new End({\r\n      name: \"end\"\r\n    });\r\n    endSc.addRObj(end);\r\n    this.game.sceneManager.bringToFront(\"endSc\");\r\n  }\r\n\r\n  ballHitStick() {\r\n    let minX = this.stick.x;\r\n    let maxX = this.stick.x + this.stick.w;\r\n    let minY = this.stick.y;\r\n    let maxY = this.stick.y + this.stick.h;\r\n    if (this.x >= minX && this.x <= maxX && this.y >= minY && this.y <= maxY) {\r\n      this.dy = -this.dy;\r\n      this.dx = this.dx + this.stick.dx;\r\n    }\r\n  }\r\n\r\n  ballHitBricks() {\r\n    for (let i = 0; i < this.bricks.length; i++) {\r\n      let minX = this.bricks[i].x;\r\n      let maxX = this.bricks[i].x + this.bricks[i].w;\r\n      let minY = this.bricks[i].y;\r\n      let maxY = this.bricks[i].y + this.bricks[i].h;\r\n      if (\r\n        this.bricks[i].isVisible &&\r\n        this.x >= minX &&\r\n        this.x <= maxX &&\r\n        this.y >= minY &&\r\n        this.y <= maxY\r\n      ) {\r\n        this.dy = -this.dy;\r\n        this.bricks[i].isVisible = false;\r\n        if (this.bricks[i].value > 1) {\r\n          this.generateReward(this.bricks[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  generateReward(brick) {\r\n    let reward = new Reward({\r\n      name: `reward${brick.x + \"\" + brick.y}`,\r\n      x: brick.x,\r\n      y: brick.y,\r\n      w: brick.w,\r\n      h: brick.h,\r\n      dy: 1,\r\n      value: brick.value\r\n    });\r\n    this.owner.addRObj(reward);\r\n  }\r\n}\r\n\r\nclass Brick extends Sprite {\r\n  constructor(args) {\r\n    super(args);\r\n    this.value = args.value;\r\n  }\r\n  render(ctx) {\r\n    ctx.fillStyle = \"#afb42b\";\r\n    ctx.fillRect(this.x, this.y, this.w, this.h);\r\n  }\r\n  update() {\r\n    super.update();\r\n  }\r\n}\r\n\r\nclass Reward extends Sprite {\r\n  constructor(args) {\r\n    super(args);\r\n    this.color = args.color;\r\n    this.value = args.value;\r\n  }\r\n  render(ctx) {\r\n    ctx.fillStyle = this.color;\r\n    ctx.fillRect(this.x, this.y, this.w, this.h);\r\n    if (this.value === 2) {\r\n      ctx.strokeStyle = \"#fff\";\r\n      ctx.strokeText(\"Reward Size\", this.x, this.y + this.h / 2);\r\n    }\r\n    if (this.value === 3) {\r\n      ctx.strokeStyle = \"#fff\";\r\n      ctx.strokeText(\"Reward Speed\", this.x, this.y + this.h / 2);\r\n    }\r\n  }\r\n  update() {\r\n    super.update();\r\n  }\r\n}\r\n\r\nclass MyStick extends Stick {\r\n  constructor(args) {\r\n    super(args);\r\n    this.originW = this.w;\r\n    this.originSpeed = this.speed;\r\n  }\r\n  update() {\r\n    this.stickHitReward();\r\n    super.update();\r\n  }\r\n\r\n  resetState(status) {\r\n    switch (status) {\r\n      case 2:\r\n        this.w = this.originW;\r\n        break;\r\n      case 3:\r\n        this.speed = this.originSpeed;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  updateState(status) {\r\n    switch (status) {\r\n      case 2:\r\n        this.w = this.originW * 2;\r\n        setTimeout(() => {\r\n          this.resetState(status);\r\n        }, 30000);\r\n        break;\r\n      case 3:\r\n        this.speed = this.originSpeed * 2;\r\n        setTimeout(() => {\r\n          this.resetState(status);\r\n        }, 30000);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  stickHitReward() {\r\n    let rObjs = this.owner.rObjs;\r\n    let minX = this.x;\r\n    let maxX = this.x + this.w;\r\n    let minY = this.y;\r\n    let maxY = this.y + this.h;\r\n    for (let i = 0; i < rObjs.length; i++) {\r\n      if (rObjs[i].name.includes(\"reward\")) {\r\n        if (\r\n          rObjs[i].x >= minX - rObjs[i].w &&\r\n          rObjs[i].x <= maxX + rObjs[i].w &&\r\n          rObjs[i].y + rObjs[i].h >= minY &&\r\n          rObjs[i].y + rObjs[i].h <= maxY\r\n        ) {\r\n          rObjs[i].isVisible = false;\r\n          this.updateState(rObjs[i].value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass LoadingContent extends Sprite {\r\n  constructor(args) {\r\n    super(args);\r\n    this.w = 200;\r\n    this.h = 20;\r\n    this.from = 0;\r\n    this.percentage = 0;\r\n    this.loadingSpeed = args.loadingSpeed || 10;\r\n  }\r\n\r\n  render(ctx) {\r\n    ctx.fillStyle = \"green\";\r\n    ctx.fillRect(this.x, this.y, this.from, this.h);\r\n    ctx.strokeStyle = \"blue\";\r\n    ctx.rect(this.x, this.y, this.w, this.h);\r\n    ctx.stroke();\r\n    ctx.strokeText(\r\n      Number.parseInt((this.from / this.w) * 100) + \"%\",\r\n      this.x + 80,\r\n      this.y - 10\r\n    );\r\n  }\r\n\r\n  update() {\r\n    if (this.from < this.w * this.percentage) {\r\n      this.from += this.loadingSpeed;\r\n    }\r\n    super.update();\r\n  }\r\n}\r\n\r\nclass CusLoading extends Loading {\r\n  start(configArr) {\r\n    this.container = this.game.container;\r\n    this.sceneName = \"loadingSc\";\r\n    this.scene = this.game.sceneManager.createScene({\r\n      name: this.sceneName,\r\n      x: 0,\r\n      y: 0,\r\n      w: this.container.clientWidth,\r\n      h: this.container.clientHeight\r\n    });\r\n    this.loadingContent = new LoadingContent({\r\n      x: this.container.clientWidth / 2 - 100,\r\n      y: this.container.clientHeight / 2 - 10\r\n    });\r\n    this.scene.addRObj(this.loadingContent);\r\n    this.game.sceneManager.bringToFront(this.sceneName);\r\n  }\r\n\r\n  loaded(config, source, percentage) {\r\n    this.loadingContent.percentage = percentage;\r\n  }\r\n\r\n  completed(resources) {\r\n    this.game.sceneManager.bringToBack(this.sceneName);\r\n  }\r\n}\r\n\r\nexport default class Example extends BaseExample {\r\n  getStick() {\r\n    let stick = new MyStick({\r\n      name: \"stick\",\r\n      x: 100,\r\n      y: 500,\r\n      w: 100,\r\n      h: 10,\r\n      color: \"#1976d2\"\r\n    });\r\n    return stick;\r\n  }\r\n\r\n  getBricks(brickData) {\r\n    let bricks = [];\r\n    for (let i = 0; i < brickData.length; i++) {\r\n      for (let j = 0; j < brickData[i].length; j++) {\r\n        let brick = new Brick({\r\n          name: `brick${i + \"\" + j}`,\r\n          x: (80 + 1) * j + 20,\r\n          y: (20 + 1) * i + 20,\r\n          w: 80,\r\n          h: 20,\r\n          value: brickData[i][j],\r\n          isVisible: Boolean(brickData[i][j])\r\n        });\r\n        bricks.push(brick);\r\n      }\r\n    }\r\n    return bricks;\r\n  }\r\n\r\n  getBall(stick, bricks, game) {\r\n    let ball = new Ball({\r\n      name: \"ball\",\r\n      x: stick.x + stick.w / 2,\r\n      y: stick.y - 5,\r\n      r: 5,\r\n      stick,\r\n      bricks,\r\n      game\r\n    });\r\n    return ball;\r\n  }\r\n\r\n  render() {\r\n    const config = [\r\n      {\r\n        name: \"brickData\",\r\n        desc: \"Render silly brickes...\",\r\n        src: \"./data/brickes.json\",\r\n        type: \"JSON\"\r\n      }\r\n    ];\r\n    let resourceMgmt = new Resource({\r\n      config,\r\n      game: this.game,\r\n      loading: new CusLoading()\r\n    });\r\n    resourceMgmt.load().then(resources => {\r\n      const { brickData } = resources;\r\n      this.stick = this.getStick();\r\n      this.bricks = this.getBricks(brickData);\r\n      this.ball = this.getBall(this.stick, this.bricks, this.game);\r\n      this.scene.addRObj(this.stick);\r\n      for (let i = 0; i < this.bricks.length; i++) {\r\n        this.scene.addRObj(this.bricks[i]);\r\n      }\r\n      this.scene.addRObj(this.ball);\r\n    });\r\n  }\r\n}\r\n","export class RenderObj {\r\n  static SID = 0;\r\n\r\n  constructor(args) {\r\n    this.name = args.name || `Unnamed_${++RenderObj.SID}`;\r\n    this.owner = args.owner || null;\r\n    //x, y 方向坐标\r\n    this.x = args.x || 0;\r\n    this.y = args.y || 0;\r\n    //对象的宽度和高度\r\n    this.w = args.w || 0;\r\n    this.h = args.h || 0;\r\n    //x和y方向的速度\r\n    this.dx = args.dx || 0;\r\n    this.dy = args.dy || 0;\r\n    //x和y方向的加速度\r\n    this.vx = args.vx || 0;\r\n    this.vy = args.vy || 0;\r\n    this.deg = args.deg || 0;\r\n    this.zIndex = args.zIndex || 0;\r\n    this.isVisible = args.isVisible || true;\r\n    this.canRemove = args.canRemove || false;\r\n  }\r\n\r\n  //设置位置\r\n  moveTo(x, y) {\r\n    this.x = x || this.x;\r\n    this.y = y || this.y;\r\n  }\r\n\r\n  //移动\r\n  move(xOff, yOff) {\r\n    this.x += xOff;\r\n    this.y += yOff;\r\n  }\r\n\r\n  //移动一小步\r\n  moveStep() {\r\n    this.dx += this.vx;\r\n    this.dy += this.vy;\r\n    this.x += this.dx;\r\n    this.y += this.dy;\r\n  }\r\n\r\n  //旋转角度\r\n  rotate(deg) {\r\n    this.deg = deg;\r\n  }\r\n\r\n  //更新方法， 每一帧用\r\n  update() {\r\n    this.moveStep();\r\n  }\r\n\r\n  render(ctx) {\r\n    return;\r\n  }\r\n}\r\n","export class Scene {\r\n  static SID = 0;\r\n  constructor(args) {\r\n    args = args || {};\r\n    this.name = args.name || \"Unnamed_\" + ++Scene.SID;\r\n    this.x = args.x || 0;\r\n    this.y = args.y || 0;\r\n    this.w = args.w || 320;\r\n    this.h = args.h || 280;\r\n    //背景元素及其样式\r\n    this.color = args.color || \"#fff\";\r\n    this.holder = document.createElement(\"div\");\r\n    this.holder.setAttribute(\"id\", `sc_${this.name}`);\r\n    this.holder.setAttribute(\"class\", \"sc_container\");\r\n    //画布及其样式\r\n    this.cvs = document.createElement(\"canvas\");\r\n    this.cvs.setAttribute(\"id\", `cv_${this.name}`);\r\n    this.cvs.setAttribute(\"class\", \"sc_cv\");\r\n    this.ctx = this.cvs.getContext(\"2d\");\r\n    this.setPos();\r\n    this.setSize();\r\n    this.setColor(this.color);\r\n    this.holder.appendChild(this.cvs);\r\n    args.container.appendChild(this.holder);\r\n    this.listeners = [];\r\n    this.rObjs = [];\r\n    this.namedRobjs = {};\r\n  }\r\n\r\n  //设置场景位置\r\n  setPos(x, y) {\r\n    this.x = x || this.x;\r\n    this.y = y || this.y;\r\n    this.holder.style.left = this.x + \"px\";\r\n    this.holder.style.top = this.y + \"px\";\r\n  }\r\n\r\n  //设置场景大小\r\n  setSize(w, h) {\r\n    this.w = w || this.w;\r\n    this.h = h || this.h;\r\n    this.holder.style.width = this.w;\r\n    this.holder.style.height = this.h;\r\n    this.cvs.setAttribute(\"width\", this.w);\r\n    this.cvs.setAttribute(\"height\", this.h);\r\n  }\r\n\r\n  //设置场景背景颜色\r\n  setColor(color) {\r\n    this.color = color || \"#fff\";\r\n    this.holder.style.backgroundColor = this.color;\r\n  }\r\n\r\n  //更新所有精灵\r\n  update() {\r\n    for (let i = 0; i < this.rObjs.length; i++) {\r\n      this.rObjs[i].update();\r\n    }\r\n    this.removeAllCanRemove();\r\n  }\r\n\r\n  removeAllCanRemove() {}\r\n\r\n  //渲染所有精灵\r\n  render() {\r\n    let ltns = this.listeners;\r\n    this.clear();\r\n    for (let i = 0, len = ltns.length; i < len; i++) {\r\n      ltns[i].enabled && ltns[i].onBeforeRender(this);\r\n    }\r\n    this.renderRObj();\r\n    for (let i = 0, len = ltns.length; i < len; i++) {\r\n      ltns[i].enabled && ltns[i].onAfterRender(this);\r\n    }\r\n  }\r\n\r\n  //渲染所有对象\r\n  renderRObj() {\r\n    for (let i = 0, len = this.rObjs.length; i < len; i++) {\r\n      this.ctx.save();\r\n      this.rObjs[i].isVisible && this.rObjs[i].render(this.ctx);\r\n      this.ctx.restore();\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.ctx.clearRect(0, 0, this.w, this.h);\r\n  }\r\n\r\n  show() {\r\n    this.holder.style.display = \"block\";\r\n  }\r\n\r\n  hide() {\r\n    this.holder.style.display = \"none\";\r\n  }\r\n\r\n  //设置场景背景图片\r\n  setBGImg(img, pattern) {\r\n    this.holder.style.backgroundImage = `url(\"${img.src}\")`;\r\n    switch (pattern) {\r\n      case 0:\r\n        this.holder.style.backgroundRepeat = \"no-repeat\";\r\n        this.holder.style.backgroundPosition = \"center\";\r\n        break;\r\n      case 1:\r\n        this.holder.style.backgroundSize = `${this.w}px, ${this.h}px`;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  clean() {\r\n    this.cvs.parentNode.removeChild(this.cvs);\r\n    this.holder.parentNode.removeChild(this.holder);\r\n    this.cvs = this.holder = this.ctx = null;\r\n    // this.rObjs = [];\r\n  }\r\n\r\n  //将可以展示的对象添加到该场景\r\n  addRObj(renderObj) {\r\n    renderObj.owner = this;\r\n    this.rObjs.push(renderObj);\r\n    this.namedRobjs[renderObj.name] = renderObj;\r\n  }\r\n}\r\n","import { Scene } from \"./scene\";\r\n\r\nexport class SceneManager {\r\n  constructor(args) {\r\n    this.namedScenes = {};\r\n    this.scenes = [];\r\n    this.container = args.container;\r\n  }\r\n\r\n  createScene(args) {\r\n    let sc = new Scene({ ...args, container: this.container });\r\n    this.push(sc);\r\n    return sc;\r\n  }\r\n\r\n  sortSceneIdx() {\r\n    for (let i = 0, len = this.scenes.length; i < len; i++) {\r\n      let sc = this.scenes[i];\r\n      sc.holder.style.zIndex = i;\r\n    }\r\n  }\r\n\r\n  push(scene) {\r\n    if (!this.getScene(scene.name)) {\r\n      this.scenes.push(scene);\r\n      this.namedScenes[scene.name] = scene;\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  pop() {\r\n    let sc = this.scenes.pop();\r\n    if (sc !== null) {\r\n      sc.clean();\r\n      delete this.namedScenes[sc.name];\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  getIndex(name) {\r\n    for (let i = 0; i < this.scenes.length; i++) {\r\n      if (name === this.scenes[i].name) {\r\n        return i;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  bringToBack(name) {\r\n    let scenes = this.scenes;\r\n    let index = this.getIndex(name);\r\n    if (index !== 0) {\r\n      let temp = scenes[0];\r\n      scenes[0] = scenes[index];\r\n      scenes[index] = temp;\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  bringToFront(name) {\r\n    let scenes = this.scenes;\r\n    let index = this.getIndex(name);\r\n    if (index !== scenes.length - 1) {\r\n      let temp = scenes[scenes.length - 1];\r\n      scenes[scenes.length - 1] = scenes[index];\r\n      scenes[index] = temp;\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  remove(name) {\r\n    let sc = this.getScene(name);\r\n    if (sc !== null) {\r\n      sc.clean();\r\n      delete this.namedScenes[name];\r\n      //TODO remove from this.scenes\r\n      this.sortSceneIdx();\r\n    }\r\n  }\r\n\r\n  getScene(name) {\r\n    return this.namedScenes[name];\r\n  }\r\n\r\n  getCurrentScene() {\r\n    return this.scenes[this.scenes.length - 1];\r\n  }\r\n\r\n  clearAll() {\r\n    for (let i = 0; i < this.scenes.length; i++) {\r\n      this.scenes[i].clean();\r\n    }\r\n    this.namedScenes = {};\r\n    this.scenes = [];\r\n  }\r\n}\r\n","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export class EventListener {\r\n  constructor(args) {\r\n    this.enabled = true;\r\n    this.onBeforeRender = args[\"beforeRender\"] || this.onBeforeRender;\r\n    this.onAfterRender = args[\"afterRender\"] || this.onAfterRender;\r\n  }\r\n\r\n  onBeforeRender() {\r\n    return true;\r\n  }\r\n\r\n  onAfterRender() {\r\n    return true;\r\n  }\r\n}\r\n","export const FrameState = {\r\n  //最大帧数\r\n  maxFrame: 0,\r\n  //最小帧数\r\n  minFrame: 9999,\r\n  //即时帧数\r\n  currFrame: 0,\r\n  //当前时间\r\n  currTime: 0,\r\n  //每帧流逝的时间\r\n  elapseTime: 0,\r\n  //用于统计每秒开始时间\r\n  _sTime: 0,\r\n  //用于统计每秒总帧数\r\n  _sTFrame: 0,\r\n\r\n  //启动帧状态检测器\r\n  start() {\r\n    this.currTime = this._sTime = new Date();\r\n  },\r\n\r\n  //每帧在游戏循环前调用此方法，更新和计算帧数\r\n  update() {\r\n    let fTime = new Date();\r\n    if (fTime - this._sTime >= 1000) {\r\n      this.currFrame = this._sTFrame;\r\n      this.maxFrame =\r\n        this.currFrame > this.maxFrame ? this.currFrame : this.maxFrame;\r\n      this.minFrame =\r\n        this.currFrame < this.minFrame ? this.currFrame : this.minFrame;\r\n      this._sTFrame = 0;\r\n      this._sTime = fTime;\r\n    } else {\r\n      this._sTFrame += 1;\r\n    }\r\n    this.elapseTime = fTime - this.currTime;\r\n    this.currTime = fTime;\r\n  },\r\n\r\n  clear() {\r\n    this.maxFrame = 0;\r\n    this.minFrame = 9999;\r\n    this.currFrame = 0;\r\n    this.currTime = 0;\r\n    this.elapseTime = 0;\r\n    this._sTime = 0;\r\n    this._sTFrame = 0;\r\n  }\r\n};\r\n\r\nexport const Key = (function() {\r\n  let _K = {\r\n    A: 65,\r\n    B: 66,\r\n    C: 67,\r\n    D: 68,\r\n    E: 69,\r\n    F: 70,\r\n    G: 71,\r\n    H: 72,\r\n    I: 73,\r\n    J: 74,\r\n    K: 75,\r\n    L: 76,\r\n    M: 77,\r\n    N: 78,\r\n    O: 79,\r\n    P: 80,\r\n    Q: 81,\r\n    R: 82,\r\n    S: 83,\r\n    T: 84,\r\n    U: 85,\r\n    V: 86,\r\n    W: 87,\r\n    X: 88,\r\n    Y: 89,\r\n    Z: 90,\r\n    N0: 48,\r\n    N1: 49,\r\n    N2: 50,\r\n    N3: 51,\r\n    N4: 52,\r\n    N5: 53,\r\n    N6: 54,\r\n    N7: 55,\r\n    N8: 56,\r\n    N9: 57,\r\n    LEFT: 37,\r\n    RIGHT: 39,\r\n    UP: 38,\r\n    DOWN: 40,\r\n    ENTER: 13,\r\n    SPACE: 32,\r\n    TAB: 9,\r\n    SHIFT: 16,\r\n    ALT: 18,\r\n    CTRL: 17,\r\n\r\n    states: new Array(255),\r\n    setEnabled(flag) {\r\n      if (flag) {\r\n        let st = this.states;\r\n        this.clearKeyStates();\r\n        document.onkeydown = e => {\r\n          st[e.keyCode] = 1;\r\n        };\r\n        document.onkeyup = e => {\r\n          st[e.keyCode] = 0;\r\n        };\r\n      } else {\r\n        document.onkeydown = null;\r\n        document.onkeyup = null;\r\n      }\r\n    },\r\n\r\n    pressed(key) {\r\n      return this.states[key];\r\n    },\r\n\r\n    clearKeyStates() {\r\n      for (let i = 0; i < 255; i++) {\r\n        this.states[i] = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  _K.setEnabled(true);\r\n  return _K;\r\n})();\r\n","import { FrameState } from \"./sys\";\r\nimport { SceneManager } from \"./sceneManager\";\r\nimport { EventListener } from \"./event\";\r\n\r\nexport class Game {\r\n  //初始化游戏\r\n  constructor(args) {\r\n    this.paused = false;\r\n    this.listeners = [];\r\n    this.container = args.container;\r\n    this.sceneManager = new SceneManager({ container: args.container });\r\n  }\r\n\r\n  //添加监听器\r\n  addListener(ln) {\r\n    this.listeners.push(ln);\r\n  }\r\n\r\n  //清除监听器\r\n  clearListener() {\r\n    this.listeners.length = 0;\r\n  }\r\n\r\n  //游戏主循环\r\n  mainLoop() {\r\n    let ltns = this.listeners;\r\n    for (let i = 0; i < ltns.length; i++) {\r\n      ltns[i].enabled && ltns[i].onBeforeRender();\r\n    }\r\n    let scene = this.sceneManager.getCurrentScene();\r\n    if (scene) {\r\n      scene.update();\r\n      scene.render();\r\n    }\r\n    for (let i = 0; i < ltns.length; i++) {\r\n      ltns[i].enabled && ltns[i].onAfterRender();\r\n    }\r\n  }\r\n\r\n  //启动游戏\r\n  run(fps) {\r\n    fps = fps || 60;\r\n    let self = this,\r\n      spf = 1000 / fps || 0;\r\n\r\n    //开始帧检测器\r\n    FrameState.start();\r\n    self.tHand = setInterval(function() {\r\n      //更新帧数状态\r\n      FrameState.update();\r\n      if (!self.paused) {\r\n        self.mainLoop();\r\n      }\r\n    }, spf);\r\n  }\r\n\r\n  //暂停游戏\r\n  pause() {\r\n    this.paused = true;\r\n  }\r\n\r\n  //停止游戏\r\n  stop() {\r\n    clearInterval(this.tHand);\r\n    FrameState.clear();\r\n  }\r\n\r\n  showFrames() {\r\n    let container = this.container;\r\n    try {\r\n      container.removeChild(document.querySelector(\".max-frame-ele\"));\r\n      container.removeChild(document.querySelector(\".min-frame-ele\"));\r\n      container.removeChild(document.querySelector(\".curr-frame-ele\"));\r\n    } catch (error) {}\r\n\r\n    let maxFrameEle = document.createElement(\"div\");\r\n    let minFrameEle = document.createElement(\"div\");\r\n    let currFrameEle = document.createElement(\"div\");\r\n    maxFrameEle.setAttribute(\"class\", \"max-frame-ele\");\r\n    minFrameEle.setAttribute(\"class\", \"min-frame-ele\");\r\n    currFrameEle.setAttribute(\"class\", \"curr-frame-ele\");\r\n    container.appendChild(maxFrameEle);\r\n    container.appendChild(minFrameEle);\r\n    container.appendChild(currFrameEle);\r\n    this.addListener(\r\n      new EventListener({\r\n        afterRender() {\r\n          maxFrameEle.innerText = \"最大帧数：\" + FrameState.maxFrame;\r\n          minFrameEle.innerText = \"最小帧数：\" + FrameState.minFrame;\r\n          currFrameEle.innerText = \"当前帧数：\" + FrameState.currFrame;\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n","export const randomColor = function() {\r\n  let r = Number.parseInt(Math.random() * 256);\r\n  let g = Number.parseInt(Math.random() * 256);\r\n  let b = Number.parseInt(Math.random() * 256);\r\n  return `rgba(${r}, ${g}, ${b}, 1)`;\r\n};\r\n\r\nexport function degreesToRadians(degrees) {\r\n  var pi = Math.PI;\r\n  return degrees * (pi / 180);\r\n}\r\n","import { FrameState } from \"./sys\";\r\n\r\nexport class Frames {\r\n  constructor(args) {\r\n    this.name = args.name;\r\n    this.duration = args.duration || 50;\r\n    this.frames = [];\r\n    this.img = args.img;\r\n  }\r\n\r\n  //添加帧数据\r\n  add(x, y, w, h, img, dur) {\r\n    dur = dur || this.duration;\r\n    img = img || this.img;\r\n    this.frames.push([img, x, y, w, h, dur]);\r\n  }\r\n\r\n  //插入帧数据\r\n  insert(index, x, y, w, h, img, dur) {\r\n    dur = dur || this.duration;\r\n    img = img || this.img;\r\n    this.frames.splice(index, 0, [img, x, y, w, h, dur]);\r\n  }\r\n\r\n  //移出帧数据\r\n  remove(index) {\r\n    this.frames.splice(index, 1);\r\n  }\r\n\r\n  //删除所有帧\r\n  clear() {\r\n    this.frames = [];\r\n  }\r\n\r\n  //获取帧数据\r\n  get(index) {\r\n    return this.frames[index];\r\n  }\r\n\r\n  //获取总数\r\n  getCount() {\r\n    return this.frames.length;\r\n  }\r\n}\r\n\r\nexport class Animations {\r\n  constructor(args) {\r\n    this.anims = {};\r\n  }\r\n\r\n  //添加帧动画集合\r\n  add(name, frames) {\r\n    this.anims[name] = frames;\r\n  }\r\n\r\n  //删除帧动画集合\r\n  remove(name) {\r\n    this.anims[name] = null;\r\n  }\r\n\r\n  //清空帧动画集合\r\n  clear() {\r\n    this.anims = [];\r\n  }\r\n\r\n  //获取当前帧动画\r\n  get(name) {\r\n    return this.anims[name];\r\n  }\r\n}\r\n\r\nexport class FrameCtrl {\r\n  constructor(args) {\r\n    //默认动画处理函数\r\n    function defProcessFrame() {\r\n      this.fDur += FrameState.elapseTime * this.speed;\r\n      if (this.fDur >= this.currFrames.frames[this.currFIdx][5]) {\r\n        this.fDur = 0;\r\n        if (this.currFIdx < this.feIdx - 1) {\r\n          ++this.currFIdx;\r\n        } else {\r\n          if (this.isCycle) {\r\n            this.currFIdx = this.fsIdx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.processFrame = args.processFrame || defProcessFrame;\r\n  }\r\n\r\n  reset() {\r\n    this.fsIdx = 0;\r\n    this.feIdx = this.currFrames.getCount();\r\n    this.currFIdx = 0;\r\n    this.isCycle = true;\r\n    this.fDur = 0;\r\n    this.speed = 1;\r\n  }\r\n\r\n  setCurrent(name) {\r\n    let cFrames = this.anims.get(name);\r\n    if (this.currFrames !== cFrames) {\r\n      let oSpeed = this.speed || 1;\r\n      this.currFrames = cFrames;\r\n      this.reset();\r\n      this.speed = oSpeed;\r\n    }\r\n  }\r\n\r\n  getCurrent() {\r\n    return this.currFrames;\r\n  }\r\n\r\n  setAnims(animations, currAnimName) {\r\n    this.anims = animations;\r\n    currAnimName = currAnimName || \"def\";\r\n    this.setCurrent(currAnimName);\r\n  }\r\n\r\n  getCurrFrameIdx() {\r\n    return this.currFIdx;\r\n  }\r\n\r\n  getCurrFrame() {\r\n    return this.currFrames.get(this.currFIdx);\r\n  }\r\n\r\n  getNextFrame() {\r\n    this.processFrame();\r\n    return this.currFrames.get(this.currFIdx);\r\n  }\r\n}\r\n","import { RenderObj } from \"./renderObj\";\r\nimport { FrameCtrl } from \"./frames\";\r\nimport { degreesToRadians } from \"./utils\";\r\n\r\nexport class Sprite extends RenderObj {\r\n  constructor(args) {\r\n    super(args);\r\n    this.anims = null;\r\n    this.animCtrl = new FrameCtrl({});\r\n    this.isXFlip = false;\r\n    this.isYFlip = false;\r\n    this.scaleX = 1;\r\n    this.scaleY = 1;\r\n  }\r\n\r\n  setAnims(animations, currAnimName) {\r\n    currAnimName = currAnimName || \"def\";\r\n    this.anims = animations;\r\n    this.animCtrl.setAnims(animations, currAnimName);\r\n  }\r\n\r\n  addAnim(name, frames, isCurrent) {\r\n    this.anims.add(name, frames);\r\n    isCurrent && this.animCtrl.setCurrent(name);\r\n  }\r\n\r\n  removeAnim(name) {\r\n    this.anims.remove(name);\r\n  }\r\n\r\n  setCAnim(name) {\r\n    this.animCtrl.setCurrent(name);\r\n  }\r\n\r\n  setAnimSpeed(sp) {\r\n    this.animCtrl.speed = sp;\r\n  }\r\n\r\n  getAnim(name) {\r\n    return this.anims.get(name);\r\n  }\r\n\r\n  getCurrentAnim() {\r\n    return this.animCtrl.getCurrent();\r\n  }\r\n\r\n  getCurrentFrame() {\r\n    return this.animCtrl.getCurrFrame();\r\n  }\r\n\r\n  getNextFrame() {\r\n    return this.animCtrl.getNextFrame();\r\n  }\r\n\r\n  render(ctx) {\r\n    ctx.translate(this.x, this.y);\r\n    let hw = 0.5 * this.w;\r\n    let hh = 0.5 * this.h;\r\n    let scaleX = this.isXFlip ? -this.scaleX : this.scaleX;\r\n    let scaleY = this.isYFlip ? -this.scaleY : this.scaleY;\r\n    if (this.deg !== 0) {\r\n      ctx.rotate(degreesToRadians(this.deg));\r\n    }\r\n    ctx.scale(scaleX, scaleY);\r\n    let f = this.getNextFrame();\r\n    ctx.drawImage(f[0], f[1], f[2], f[3], f[4], -hw, -hh, this.w, this.h);\r\n  }\r\n}\r\n","export class Loading {\r\n  constructor(args) {\r\n    this.game = args && args.game;\r\n  }\r\n\r\n  start(configArr) {\r\n    console.log(\"Starting Loading...\");\r\n  }\r\n\r\n  loaded(config, source, percentage) {\r\n    console.log(`Loading ${config.name}...`);\r\n  }\r\n\r\n  completed(resources) {\r\n    console.log(\"Completed Loading...\");\r\n  }\r\n}\r\n","import { Loading } from \"./loading\";\r\n\r\nexport class Resource {\r\n  constructor(args) {\r\n    this.index = 0;\r\n    this.resources = {};\r\n    this.disable = false;\r\n    this.configArr = args.config;\r\n    this.count = args.config.length;\r\n    if (args.loading) {\r\n      args.loading.game = args.game;\r\n    }\r\n    this.loading = args.loading || new Loading({ game: args.game });\r\n  }\r\n\r\n  loadImage(src) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        let img = new Image();\r\n        img.onload = () => {\r\n          resolve(img);\r\n        };\r\n        img.src = src;\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadJson(src) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        fetch(src).then(res => {\r\n          res.json().then(json => {\r\n            resolve(json);\r\n          });\r\n        });\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadAudio(src) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        fetch(src).then(res =>\r\n          res.arrayBuffer().then(buffer => {\r\n            resolve(buffer);\r\n          })\r\n        );\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  loadedEach(resolve, config, resource) {\r\n    this.index++;\r\n    this.loading.loaded(config, resource, this.index / this.count);\r\n    this.resources[config.name] = resource;\r\n    if (this.index >= this.count) {\r\n      setTimeout(() => {\r\n        this.loading.completed(this.resources);\r\n        resolve(this.resources);\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  load() {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        this.loading.start(this.configArr);\r\n        this.configArr.forEach(config => {\r\n          switch (config.type) {\r\n            case \"IMAGE\":\r\n              this.loadImage(config.src).then(resource => {\r\n                this.loadedEach(resolve, config, resource);\r\n              });\r\n              break;\r\n            case \"JSON\":\r\n              this.loadJson(config.src).then(resource => {\r\n                this.loadedEach(resolve, config, resource);\r\n              });\r\n              break;\r\n            case \"AUDIO\":\r\n              this.loadAudio(config.src).then(resource => {\r\n                this.loadedEach(resolve, config, resource);\r\n              });\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        });\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n}\r\n","export const Audio = {\r\n  _getContext: function() {\r\n    try {\r\n      return (\r\n        (AudioContext && new window.AudioContext()) ||\r\n        new window.webkitAudioContext()\r\n      );\r\n    } catch (e) {\r\n      console.log(\"Your browser can not support Web Audio API\");\r\n    }\r\n    return null;\r\n  },\r\n\r\n  play(buffer) {\r\n    let context = this._getContext();\r\n    let source = context.createBufferSource();\r\n    context.decodeAudioData(buffer, function(decodedData) {\r\n      source.buffer = decodedData;\r\n      source.connect(context.destination);\r\n      source.start(0);\r\n    });\r\n  }\r\n};\r\n","import { RenderObj } from \"./renderObj\";\r\nimport { Scene } from \"./scene\";\r\nimport { SceneManager } from \"./sceneManager\";\r\nimport { EventListener } from \"./event\";\r\nimport { FrameState, Key } from \"./sys\";\r\nimport { Game } from \"./game\";\r\nimport * as utils from \"./utils\";\r\nimport { Sprite } from \"./sprite\";\r\nimport { Frames, Animations, FrameCtrl } from \"./frames\";\r\nimport { Resource } from \"./resource\";\r\nimport { Audio } from \"./audio\";\r\nimport { Loading } from \"./loading\";\r\n\r\nexport {\r\n  RenderObj,\r\n  Scene,\r\n  SceneManager,\r\n  EventListener,\r\n  FrameState,\r\n  Game,\r\n  utils,\r\n  Sprite,\r\n  Frames,\r\n  Animations,\r\n  FrameCtrl,\r\n  Key,\r\n  Resource,\r\n  Audio,\r\n  Loading\r\n};\r\n","import getPrototypeOf from \"./getPrototypeOf\";\nimport superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}"],"sourceRoot":""}